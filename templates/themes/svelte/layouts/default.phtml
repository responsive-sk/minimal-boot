<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="<?= $e($description ?? 'Modern Svelte Application') ?>"/>
    <meta name="author" content="<?= $e($author ?? 'Minimal Boot Team') ?>"/>
    <meta name="generator" content="Minimal Boot + Svelte"/>
    <meta name="theme-color" content="#1e293b"/>

    <title><?= $e($title ?? 'Minimal Boot - Svelte Theme') ?></title>

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="<?= $asset('images/app/favicon/favicon-32x32.png') ?>"/>
    <link rel="icon" type="image/png" sizes="16x16" href="<?= $asset('images/app/favicon/favicon-16x16.png') ?>"/>
    <link rel="manifest" href="<?= $asset('images/app/favicon/site.webmanifest') ?>"/>
    <link rel="mask-icon" href="<?= $asset('images/app/favicon/safari-pinned-tab.svg') ?>" color="#5bbad5"/>
    <meta name="msapplication-TileColor" content="#da532c"/>

    <!-- Performance optimizations -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link rel="dns-prefetch" href="//boot.responsive.sk"/>

    <!-- Preload critical assets -->
    <link rel="preload" href="<?= $asset('themes/svelte/assets/main.css') ?>" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
    <link rel="preload" href="<?= $asset('images/app/logo.svg') ?>" as="image"/>
    <!-- JS preload removed to avoid unused preload warning with defer -->
    <noscript><link rel="stylesheet" href="<?= $asset('themes/svelte/assets/main.css') ?>"/></noscript>

    <!-- Critical CSS inline for above-the-fold content -->
    <style>
        /* Critical CSS for initial render */
        body{margin:0;font-family:system-ui,-apple-system,sans-serif;background:#0f172a;color:#fff;overflow-x:hidden;font-display:swap;font-size:16px;line-height:1.5}
        .h-full{height:100%}
        .antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
        /* Ensure legible font sizes for mobile */
        *{font-size:inherit;line-height:inherit}
        html{font-size:16px}
        @media (max-width: 768px){
            html{font-size:16px}
            body{font-size:16px;line-height:1.6}
            .text-sm{font-size:14px!important}
            .text-xs{font-size:14px!important}
            small{font-size:14px!important}
        }
        /* Aggressive layout shift prevention */
        *{box-sizing:border-box}
        html{scroll-behavior:smooth}
        .fixed{position:fixed}
        .relative{position:relative}
        .inset-0{top:0;right:0;bottom:0;left:0}
        .z-50{z-index:50}
        .z-10{z-index:10}
        .bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}
        .from-slate-900{--tw-gradient-from:#0f172a;--tw-gradient-to:rgb(15 23 42 / 0);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}
        .via-purple-900{--tw-gradient-to:rgb(88 28 135 / 0);--tw-gradient-stops:var(--tw-gradient-from),#581c87,var(--tw-gradient-to)}
        .to-slate-900{--tw-gradient-to:#0f172a}
        .min-h-screen{min-height:100vh}
        .text-white{color:#fff}
        .opacity-20{opacity:0.2}
        .backdrop-blur-md{backdrop-filter:blur(12px)}
        .transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4,0,0.2,1);transition-duration:150ms}
        .duration-300{transition-duration:300ms}
        /* Fix deprecated h1 in section warning */
        section h1, article h1, aside h1, nav h1{font-size:3rem!important;line-height:1!important}
        @media (min-width: 768px){section h1, article h1, aside h1, nav h1{font-size:3.75rem!important}}
        /* Prevent layout shifts */
        img{max-width:100%;height:auto;display:block}
        .h-screen{min-height:100vh;height:100vh}
        .hero-section{contain:layout style paint;will-change:auto}
        .feature-card{contain:layout style;will-change:auto}
        /* Optimize font loading */
        body{font-display:swap}
        /* Reduce CLS by reserving space */
        .text-center{text-align:center;contain:layout}
        .max-w-6xl{max-width:72rem;margin:0 auto;contain:layout}
        .px-6{padding-left:1.5rem;padding-right:1.5rem}
        /* Fix specific layout shift culprits */
        .flex.items-center{min-height:64px;contain:layout style paint}
        nav{height:64px;contain:layout style paint;position:fixed;width:100%;top:0;z-index:50}
        .relative.z-10{contain:strict;transform:translateZ(0)}
        /* Prevent font-based shifts */
        .font-bold,.font-semibold{font-synthesis:none;font-display:swap}
        /* Stabilize logo container */
        .flex.items-center.space-x-3{min-width:200px;min-height:40px;contain:layout}
        /* Hero content stability */
        .text-center{contain:strict;transform:translateZ(0)}
        .max-w-6xl{contain:strict;transform:translateZ(0)}
        /* Force hardware acceleration */
        .hero-section,.feature-card{transform:translateZ(0);backface-visibility:hidden}
    </style>

    <!-- Svelte App Script - deferred and non-blocking -->
    <script type="module" src="<?= $asset('themes/svelte/assets/main.js') ?>" defer></script>
</head>

<body class="h-full antialiased">
    <!-- Page Content -->
    <?= $content ?>

    <!-- Fallback content for non-JS users -->
    <noscript>
        <div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center">
            <div class="text-center text-white p-8">
                <h1 class="text-4xl font-bold mb-4">Minimal Boot</h1>
                <p class="text-xl mb-6">Please enable JavaScript to experience the full interactive features.</p>
                <a href="/" class="inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Continue with basic version
                </a>
            </div>
        </div>
    </noscript>

    <!-- Service Worker Registration -->
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => {
                    console.log('SW registered: ', registration);
                })
                .catch(registrationError => {
                    console.log('SW registration failed: ', registrationError);
                });
        });
    }
    </script>

    <!-- Analytics and tracking scripts can go here -->
</body>
</html>
